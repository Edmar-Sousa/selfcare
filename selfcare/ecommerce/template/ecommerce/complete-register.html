{% extends "selfcare/base.html" %}
{% load static %}

{% block title %}Complete registro{% endblock title %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'css/complete-register.css' %}">
{% endblock styles %}

{% block body %}
    <form action="{% url 'register' %}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <input type="file" name="imageuser" id="image-upload" accept="image/*" style="display: none;">

        <div class="form-field">
            <h2>teste usuario - finalizar cadastro</h2>
        </div>

        <div class="form-field">
            <div class="image-upload">
                <label for="image-upload">
                    <div class="image-preview hidden">
                        <img src="" id="img">
                    </div>
    
                    <div class="dash">
                        <p>Selecionar uma imagem de perfil</p>
                    </div>
                </label>
            </div>
        </div>

        <div class="form-field">
            <p><i class="fas fa-user"></i>Nome:</p>
            <input type="text" name="username">
        </div>

        <div class="form-field">
            <p><i class="fas fa-envelope"></i>Email:</p>
            <input type="email" name="email">
        </div>

        <div class="form-field">
            <p><i class="fas fa-key"></i>Password:</p>
            <input type="password" name="password">
        </div>


        <div class="form-field">
            <label>Tipo da conta:</label>
            <p>
                <input type="radio" name="status" value="vendedor"> Vendedor
                <input type="radio" name="status" value="cliente"> Cliente
            </p>
        </div>

        <div class="form-field">
            <label for="street">Rua:</label>
            <input type="text" name="street"  id="street">
        </div>

        <div class="form-field">
            <label for="city">Cidade:</label>
            <input type="text" name="city" id="city">
        </div>

        <div class="form-field">
            <label for="state">Estado:</label>
            <input type="text" name="state" id="state">
        </div>

        <div class="form-field">
            <label for="description">Descrição:</label>
            <textarea id="description" name="description" class="description"></textarea>
        </div>

        <div class="form-field">
            <p>
                Já tem uma conta? Faça <a href="{% url 'login' %}" class="register-link">Login</a>
            </p>
        </div>

        <div class="form-field">
            <button type="submit" class="button-login">
                <i class="fas fa-user-plus"></i> Register
            </button>
        </div>

    </form>

    <script>

        const inputfile  = document.querySelector('input#image-upload')
        const imgElement = document.querySelector('img#img')


        const divImagePreview = document.querySelector('div.image-preview')
        const divDashElement  = document.querySelector('div.dash')

        const imageUpload = document.querySelector('div.image-upload')

        function addClassUplodedInImageUpload() {
            imageUpload.classList.add('uploded')
        }

        function showAndHiddenElements() {
            divImagePreview.classList.remove('hidden')
            divDashElement.classList.add('hidden')
        }

        inputfile.addEventListener('change', function () {
            const [file] = inputfile.files

            imgElement.src = URL.createObjectURL(file)
            showAndHiddenElements()
            addClassUplodedInImageUpload()
        })

    </script>
{% endblock body %}